{% extends "base.html" %}
{% load static %}

{% block title %}{{ trek.name }} | Aorbo Treks{% endblock %}

{% block content %}
<section class="py-5 mt-4 detail-bg">
  <div class="container">

    <!-- TITLE -->
    <div class="mb-2">
      <h3 class="trekname">{{ trek.name }}</h3>
    </div>

    <div class="row g-2">

      <!-- LEFT COLUMN -->
     <!-- LEFT COLUMN -->
<div class="col-12 col-md-6">

  <!-- MAIN IMAGE -->
  <div class="card shadow-lg rounded-4 overflow-hidden main-image-card mb-3">
    {% with trek.images.first as hero %}
      {% if hero and hero.image_url %}
        <img src="{{ hero.image_url }}" class="img-fluid">
      {% else %}
        <img src="{% static 'images/default-trek.jpg' %}" class="img-fluid">
      {% endif %}
    {% endwith %}
  </div>

  <!-- RELATED TREKS -->
  {% if related_treks %}
    <h6 class="fw-bold mb-2">Related Treks</h6>

    {% for related in related_treks %}
      <a href="{% url 'card_trek_detail' related.id %}" class="text-decoration-none">
        <div class="card border-0 shadow-sm rounded-3 mb-2 related-item-card">
          <div class="card-body p-2 d-flex align-items-center">

            {% with related.images.first as img %}
              {% if img and img.image_url %}
                <img src="{{ img.image_url }}"
                     class="rounded-2 me-3"
                     style="width:50px;height:50px;object-fit:cover;"
                     alt="{{ related.name }}">
              {% else %}
                <img src="{% static 'images/placeholder.jpg' %}"
                     class="rounded-2 me-3"
                     style="width:50px;height:50px;object-fit:cover;"
                     alt="No image">
              {% endif %}
            {% endwith %}

            <div class="flex-grow-1">
              <h6 class="mb-0 fw-bold">{{ related.name }}</h6>
              <small class="text-muted">{{ related.state }}</small>
            </div>

            <span class="text-primary small fw-semibold">View</span>
          </div>
        </div>
      </a>
    {% endfor %}
  {% endif %}

</div> <!-- ✅ LEFT COLUMN CLOSED -->

<!-- RIGHT COLUMN -->
<div class="col-12 col-md-6">


        <!-- DESCRIPTION -->
        {% if trek.short_desc %}
        <div class="card shadow-sm rounded-4 p-3 mb-3 description-box">
          <h5>Description</h5>
          <p class="mb-0">{{ trek.short_desc }}</p>
        </div>
        {% endif %}

        <!-- INFO CARD -->
        <div class="card shadow-lg rounded-4 p-3 info-card">

          {% if trek.price_start %}
          <div class="mb-3">
            <h6>Starting Price</h6>
            <span class="price-badge">Onwards *</span>
            <div class="h4 fw-bold price">
              ₹{{ trek.price_start }} <span class="price-text">/ person</span>
            </div>
          </div>
          {% endif %}

          <!-- OPERATORS -->
          {% if trek.operators.exists %}
          <div class="mb-3">
            <h6>Trusted Operators</h6>
            {% for op in trek.operators.all %}
              <span class="badge operator-badge">{{ op }}</span>
            {% endfor %}
          </div>
          {% endif %}

          <!-- DURATION -->
          <div class="mb-3 small">
            {% if trek.duration_days %}
              <strong>Duration:</strong> {{ trek.duration_days }}<br>
            {% endif %}
            {% if trek.operating_days %}
              <strong>Operating days:</strong> {{ trek.operating_days }}
            {% endif %}
          </div>

          <!-- PLACES & ACTIVITIES -->
          <div class="row g-3">

            {% if trek.trek_points.exists %}
            <div class="col-6">
              <h6>Famous Places</h6>
              <ul class="ps-3 small">
                {% for p in trek.trek_points.all %}
                  <li>{{ p }}</li>
                {% endfor %}
              </ul>
            </div>
            {% endif %}

            {% if trek.activities %}
            <div class="col-6">
              <h6>Activities</h6>
              <ul class="ps-1 small">
                {{ trek.activities|safe }}
              </ul>
            </div>
            {% endif %}

          </div>

        </div>
      </div>
    </div>

  </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
.detail-bg { background:#f8f9fa; }

.trekname {
  font-size:28px;
  font-weight:700;
  background:linear-gradient(135deg,#ff7a18,#ff3d00);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.main-image-card img {
  height:420px;
  width:100%;
  object-fit:cover;
}

.price { color:#007616; }

.price-badge {
  background:#ffcc00;
  font-size:11px;
  padding:4px 8px;
  border-radius:6px;
}

.operator-badge {
  background:#f87d28;
  color:#fff;
  padding:5px 12px;
  border-radius:20px;
  font-size:12px;
}

.description-box {
  border-left:4px solid #ffa94d;
}

.related-item-card:hover {
  transform:translateX(4px);
  transition:.2s;
}
</style>
{% endblock %}
{% comment %} {% extends "base.html" %}
{% load static %}

{% block title %}{{ trek.name }} | Aorbo Treks{% endblock %}

{% block content %}
<section class="py-5 mt-4 detail-bg">
  <div class="container">

    <!-- TITLE -->
    <div class="text-center mb-4">
      <h1 class="mb-0">
        <span class="trekname" style="font-size:28px;font-weight:700;">
          {{ trek.name }}
        </span>
      </h1>
    </div>

    <!-- TOP ROW -->
    <div class="row g-4">

      <!-- LEFT COLUMN -->
      <div class="col-12 col-md-6">

        <!-- MAIN IMAGE -->
        <div class="card shadow-lg rounded-4 overflow-hidden main-image-card mb-2">
          {% with trek.images.first as hero %}
            {% if hero and hero.image_url %}
              <img src="{{ hero.image_url }}" class="img-fluid" alt="{{ trek.name }}">
            {% else %}
              <div class="d-flex align-items-center justify-content-center"
                   style="height:400px;background:#fff;">
                <span class="text-muted">No image available</span>
              </div>
            {% endif %}
          {% endwith %}
        </div>

        {% if trek.related_treks.exists %}
        <h6 class="fw-bold text-dark mb-3">Related Treks</h6>

        <!-- RELATED TREK 1 & 2 -->
        {% for t in trek.related_treks.all %}
          {% if forloop.counter <= 2 %}
          <a href="{% url 'card_trek_detail' t.id %}" class="text-decoration-none">
            <div class="card border-0 shadow-sm rounded-3 mb-2 related-item-card">
              <div class="card-body p-2 d-flex align-items-center">
                {% with t.images.first as rimg %}
                  {% if rimg and rimg.image_url %}
                  <img src="{{ rimg.image_url }}" class="rounded-2 me-3"
                       style="width:50px;height:50px;object-fit:cover;">
                  {% endif %}
                {% endwith %}
                <div class="flex-grow-1">
                  <h6 class="mb-0 fw-bold">{{ t.name }}</h6>
                  <small class="text-muted">{{ t.state }}</small>
                </div>
                <span class="text-primary small fw-semibold">View</span>
              </div>
            </div>
          </a>
          {% endif %}
        {% endfor %}
        {% endif %}

      </div>

      <!-- RIGHT COLUMN -->
      <div class="col-12 col-md-6">

        {% if trek.short_desc %}
        <div class="description-box shadow-sm p-3 rounded-4 mb-3">
          <h5 class="heading text-dark fw-semibold">Description</h5>
          <p class="mb-0" style="font-size:0.95rem;">
            {{ trek.short_desc }}
          </p>
        </div>
        {% endif %}

        <!-- INFO CARD -->
        <div class="card shadow-lg p-3 border-0 rounded-4 info-card mb-4">

          {% if trek.price_start %}
          <div class="mb-3">
            <h6 class="mb-1 small fw-bold">Starting Price</h6>
            <div class="h4 fw-bold price">₹{{ trek.price_start }}</div>
          </div>
          {% endif %}

          {% if trek.operators.exists %}
          <div class="mb-3">
            <h6 class="mb-2 small fw-bold">Trusted Operators</h6>
            <div class="d-flex flex-wrap gap-2">
              {% for op in trek.operators.all %}
                <span class="badge operator-badge">{{ op }}</span>
              {% endfor %}
            </div>
          </div>
          {% endif %}

          {% if trek.duration_days or trek.operating_days %}
          <div class="mb-3" style="font-size:0.85rem;">
            {% if trek.duration_days %}
              <div><strong>Duration:</strong> {{ trek.duration_days | title }}</div>
            {% endif %}
            {% if trek.operating_days %}
              <div><strong>Operating days:</strong> {{ trek.operating_days }}</div>
            {% endif %}
          </div>
          {% endif %}

          <!-- FAMOUS PLACES + ACTIVITIES -->
          {% if trek.trek_points.exists or trek.activities %}
          <div class="row g-3">

            {% if trek.trek_points.exists %}
            <div class="col-12 col-md-6">
              <h6 class="mb-2 small fw-bold">Famous Places</h6>
              <ul class="ps-3 mb-0" style="font-size:0.85rem;">
                {% for p in trek.trek_points.all %}
                  <li>{{ p }}</li>
                {% endfor %}
              </ul>
            </div>
            {% endif %}

            {% if activities_list %}
            <div class="col-12 col-md-6">
              <h6 class="mb-2 small fw-bold">Activities</h6>
              <ul class="ps-3 mb-0" style="font-size:0.85rem;">
                {% for i in activities_list %}
                  <li>{{ i }}</li>
                {% endfor %}
              </ul>
            </div>
            {% endif %}



          </div>
          {% endif %}

        </div>

      </div>
    </div>

    <!-- RELATED TREKS 3+ (PAIRED ROWS) -->
    {% if trek.related_treks.count > 2 %}
    <div class="row g-3 mt-2">
      {% for t in trek.related_treks.all %}
        {% if forloop.counter > 2 %}
        <div class="col-12 col-md-6">
          <a href="{% url 'card_trek_detail' t.id %}" class="text-decoration-none">
            <div class="card border-0 shadow-sm rounded-3 related-item-card">
              <div class="card-body p-2 d-flex align-items-center">
                {% with t.images.first as rimg %}
                  {% if rimg and rimg.image_url %}
                  <img src="{{ rimg.image_url }}" class="rounded-2 me-3"
                       style="width:50px;height:50px;object-fit:cover;">
                  {% endif %}
                {% endwith %}
                <div class="flex-grow-1">
                  <h6 class="mb-0 fw-bold">{{ t.name }}</h6>
                  <small class="text-muted">{{ t.state }}</small>
                </div>
                <span class="text-primary small fw-semibold">View</span>
              </div>
            </div>
          </a>
        </div>
        {% endif %}
      {% endfor %}
    </div>
    {% endif %}

  </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
.detail-bg {
  background:#f8f9fa;
}

.trekname {
  background: linear-gradient(135deg, #ff7a18, #ff3d00);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
}

.main-image-card img {
  height:400px;
  width:100%;
  object-fit:cover;
  transition:transform .35s ease;
}

.main-image-card:hover img {
  transform:scale(1.05);
}

.price {
  color:rgb(0 118 22) !important;
}

.description-box {
  background:#fff;
  border-left:3px solid #ffa94d;
}

.text-primary {
  margin-right:20px;
  color:#f97316 !important;
}

.info-card {
  background:#fff;
  border:1px solid #eee !important;
}

.operator-badge {
  background:#f87d28;
  color:#fff;
  font-size:.7rem;
  font-weight:600;
  padding:5px 12px;
  border-radius:16px;
}

.related-item-card {
  background:#fff;
  transition:.2s ease;
}

.related-item-card:hover {
  transform:translateX(4px);
}

@media(max-width:768px){
  .main-image-card img { height:240px; }
}
</style>
{% endblock %} {% endcomment %}